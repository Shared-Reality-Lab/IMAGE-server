{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://image.a11y.mcgill.ca/preprocessors/openstreetmap.schema.json",
    "type": "object",
    "title": "OpenStreetMap Preprocessor",
    "description": "Information on the contents of a place on a map",
    "properties": {

        "timestamp": {
            "type": "number",
            "minimum": 0
        },
        "request_uuid": {
            "type": "string",
            "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
        },
        "name": {
            "type": "string",
            "pattern": "^[A-Za-z]{2,6}(\\.((?!-)[A-Za-z0-9-]+(?<!-)))+$"
        },
        "data": {
            "type": "object",
            "properties": {
                "point_of_interest": {
                    "type": "array",
                    "title": "point_of_interest",
                    "description": "The collection of all points of interest within the specified area of the map",
                    "items": {
                        "type": "object",
                        "title": "node" ,
                        "properties": {
                            "id": {
                            "type": "number",
                            "title": "node id",
                            "description": "point of interest node id"
                            },
                            "lat": {
                                "type": "number",
                                "title": "Latitude",
                                "description": "The latitude of the point of interest",
                                "minimum": -90,
                                "maximum": 90
                            },
                            "lon": {
                                "type": "number",
                                "title": "Longitude",
                                "description": "The longitude of the point of interest",
                                "minimum": -180,
                                "maximum": 180
                            },
                            "cat": {
                                "type": "string",
                                "title": "Category",
                                "description": "The category of the point of interest"
                            },
                            "name": {
                                "type": "string",
                                "title": "Name of point of interest",
                                "description": "The specific name of the point of interest"
                            }}}},
                "streets": {
                    "type": "array",
                    "title": "streets",
                    "description": "The street segments",
                    "items": {
                        "type": "object",
                        "title": "street_segment",
                        "properties": {
                            "street_id": {"type": "number"},
                            "street_name": {"type": "string"},
                            "street_type": {"type": "string"},
                            "addr:street": {"type": "string"},
                            "surface": {"type": "string"},
                            "oneway": {"type": "string"},
                            "sidewalk": {"type": "string"},
                            "maxspeed": {"type": "string"},
                            "lanes": {"type": "string"},
                            "nodes": {
                                "type": "array",
                                "title": "nodes",
                                "description": " The distinct points (nodes) having a directional progression along the street segments",
                                "items": {
                                    "type": "object",
                                    "title": "node",
                                    "properties": {
                                        "id": {
                                        "type": "number",
                                        "title": "node id",
                                        "description": "point of interest node id"
                                        },
                                        "lat": {
                                            "type": "number",
                                            "title": "Latitude",
                                            "description": "The latitude on a map",
                                            "minimum": -90,
                                            "maximum": 90
                                        },
                                        "lon": {
                                            "type": "number",
                                            "title": "Longitude",
                                            "description": "The longitude on a map",
                                            "minimum": -180,
                                            "maximum": 180
                                        },
                                        "POI_id": {
                                            "type": "array",
                                            "title": "POI_id",
                                            "description": "Po int of interest id matched to the nearest point (node) on the street",
                                            "items": {
                                                "type": "number",
                                                "title": "node id",
                                                "description": "point of interest id"
                                            }    
                                            
                                            
                                        }
                                    }    
                                }
    
                            }
    
                        
                        },
                        "required": ["street_id"]
                    }
                    
                }
                
                
            }
            
        }    
        
    },
    "required": ["request_uuid", "timestamp", "name", "data"]
}



